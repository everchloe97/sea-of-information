---
title: 클로저

date: 2022-08-03
---

## 면접 질문

자바스크립트의 클로저에 대해서 설명해주세요

## 답변

클로저는 `외부 함수의 변수에 접근할 수 있는 내부함수`입니다. mdn에서는 함수와 함수가 선언된 어휘적(lexical)환경의 조합이라고 하던데...(이게 무슨 말이야ㅠ)

<br />

#### 클로저 함수는 아래와 같은 특징을 가집니다.

<br />

**1. 함수를 리턴하는 함수입니다.**

```js
//함수의 호출이 두번 일어났다.
const total = (x) => (y) => x + y;
total(3)(5); // 8

typeof total(3); //'function', 리턴 값이 함수의 형태
total(5); // y = 5 + y, 리턴 값이 함수의 형태
```

여기서 total(3)의 리턴값은 함수입니다.

<br />

**2. 변수의 접근 범위**

클로저는 리턴하는 함수에 의해 스코프가 구분됩니다. 클로저의 핵심은 스코프를 이용해 변수의 접근 범위를 닫는(closuer, 폐쇄)데에 있습니다. 그래서 함수를 리턴하는 것도 중요하지만, 변수가 어디에서 선언되었는지도 중요합니다

```js
const total = function (x) {
    return function (y) {
        return x + y;
    };
};
```

-   외부 함수는 y에 접근할 수 없다. (바깥 스코프는 안쪽 스코프로의 접근이 불가능합니다.)
-   내부 함수는 x에 접근할 수 있습니다. (안쪽 스코프에서는 바깥쪽 스코프에서 선언된 변수에 접근이 가능합니다.)

<br />

#### 클로저는 아래와 같이 활용합니다.

**1. 데이터를 보존하는 함수**

```js
const total = function (x) {
    return function (y) {
        return x + y;
    };
};

const sum = total(3);
```

일반적인 함수에서 함수의 실행이 끝나면 함수 내부의 변수를 사용할 수 없습니다. 그러나 클로저는 외부 함수의 실행이 끝나도 외부 함수 내의 변수가 메모리 상에 저장되어 계속 사용할 수 있습니다.

변수 sum에는 클로저를 통해 리턴한 함수가 담겨 있으므로, sum에서는 x 변수에 3이라는 값이 담긴 채로 남아있습니다.

```js
sum(10); // 13
sum(7); // 10
```

따라서 sum 함수를 다음과 같이 사용할 수 있습니다.

<br />

**2. 클로저 모듈 패턴**
클로저는 모듈화에 유리합니다.

```js
const counter = () => {
    let value = 0;

    //객체를 이용해 여러 개의 내부함수를 리턴한다.
    return {
        increase: () => {
            value = value + 1;
        },
        decrease: () => {
            value = value - 1;
        },
        getValue: () => value,
    };
};

const counter1 = Counter();
counter1; // {increase: f, decrease: f. getValue: f }
```

내부에 함수 하나만을 리턴하지 않고, 함수를 객체에 담아 여러 개의 내부 함수를 리턴할 수 있습니다.이를 통해 `캡슐화`가 가능하며, 함수의 `재활용`이 가능합니다. 불필요한 전역 변수의 사용을 줄이고, 값을 보다 안전하게 다룰 수 있습니다!
